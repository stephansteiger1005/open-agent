services:
  # MCP Server - Provides two demo tools with constant JSON data
  mcp-server:
    build:
      context: .
      dockerfile: Dockerfile.mcp
    container_name: demo-mcp-server
    ports:
      - "8080:8080"
    restart: unless-stopped

  # OpenWebUI - Chat interface with tool server backend
  openwebui:
    image: ghcr.io/open-webui/open-webui:main
    container_name: demo-openwebui
    ports:
      - "3000:8080"
    environment:
      # Disable authentication for demo
      - WEBUI_AUTH=false
      
      # User preconfiguration
      - DEFAULT_USER_ROLE=admin
      - ENABLE_SIGNUP=false
      
      # Tool server configuration
      - TOOLS_API_URL=http://mcp-server:8080
    volumes:
      - openwebui_data:/app/backend/data
    depends_on:
      - mcp-server
    restart: unless-stopped

volumes:
  openwebui_data:
